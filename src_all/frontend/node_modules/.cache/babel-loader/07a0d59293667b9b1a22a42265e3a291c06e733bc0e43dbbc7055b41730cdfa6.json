{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"study-tour-recommendations\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"游学推荐\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"filters\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"all\"\n}, \"全部\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"scenic\"\n}, \"景区\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"campus\"\n}, \"学校\", -1 /* HOISTED */);\nconst _hoisted_7 = [_hoisted_4, _hoisted_5, _hoisted_6];\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"all\"\n}, \"全部\", -1 /* HOISTED */);\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"10\"\n}, \"前十\", -1 /* HOISTED */);\nconst _hoisted_10 = [_hoisted_8, _hoisted_9];\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"default\"\n}, \"默认排序\", -1 /* HOISTED */);\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"popularity\"\n}, \"热度\", -1 /* HOISTED */);\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"rating\"\n}, \"评分\", -1 /* HOISTED */);\nconst _hoisted_14 = [_hoisted_11, _hoisted_12, _hoisted_13];\nconst _hoisted_15 = {\n  class: \"recommendations-list\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" 筛选选项 \"), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filterType = $event)\n  }, [..._hoisted_7], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.filterType]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.limit = $event)\n  }, [..._hoisted_10], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.limit]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.sort = $event)\n  }, [..._hoisted_14], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.sort]])]), _createCommentVNode(\" 搜索框 \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.searchKeyword = $event),\n    placeholder: \"搜索景区或学校\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchKeyword]]), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.search && _ctx.search(...args))\n  }, \"搜索\"), _createCommentVNode(\" 游学推荐列表 \"), _createElementVNode(\"ul\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recommendations, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id,\n      class: \"recommendation-item\"\n    }, [_createElementVNode(\"p\", null, \"名称：\" + _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"热度：\" + _toDisplayString(item.popularity), 1 /* TEXT */), _createElementVNode(\"p\", null, \"评分：\" + _toDisplayString(item.rating), 1 /* TEXT */), _createCommentVNode(\" 点击跳转到描述页面 \"), _createElementVNode(\"button\", {\n      onClick: _cache[5] || (_cache[5] = (...args) => $setup.goToDescription && $setup.goToDescription(...args))\n    }, \"详情\")]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","_createElementVNode","value","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_9","_hoisted_11","_hoisted_12","_hoisted_13","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_cache","$event","$setup","filterType","_hoisted_7","limit","_hoisted_10","sort","_hoisted_14","type","searchKeyword","placeholder","onClick","args","_ctx","search","_hoisted_15","_Fragment","_renderList","recommendations","item","key","id","_toDisplayString","name","popularity","rating","goToDescription"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\StudyTourRecommendations.vue"],"sourcesContent":["<!-- StudyTourRecommendations.vue -->\r\n<template>\r\n  <div class=\"study-tour-recommendations\">\r\n    <h1>游学推荐</h1>\r\n    <!-- 筛选选项 -->\r\n    <div class=\"filters\">\r\n      <select v-model=\"filterType\">\r\n        <option value=\"all\">全部</option>\r\n        <option value=\"scenic\">景区</option>\r\n        <option value=\"campus\">学校</option>\r\n      </select>\r\n      <select v-model=\"limit\">\r\n        <option value=\"all\">全部</option>\r\n        <option value=\"10\">前十</option>\r\n      </select>\r\n      <select v-model=\"sort\">\r\n        <option value=\"default\">默认排序</option>\r\n        <option value=\"popularity\">热度</option>\r\n        <option value=\"rating\">评分</option>\r\n      </select>\r\n    </div>\r\n    <!-- 搜索框 -->\r\n    <input type=\"text\" v-model=\"searchKeyword\" placeholder=\"搜索景区或学校\">\r\n    <button @click=\"search\">搜索</button>\r\n    <!-- 游学推荐列表 -->\r\n    <ul class=\"recommendations-list\">\r\n      <li v-for=\"item in recommendations\" :key=\"item.id\" class=\"recommendation-item\">\r\n        <p>名称：{{ item.name }}</p>\r\n        <p>热度：{{ item.popularity }} </p>\r\n        <p>评分：{{ item.rating }} </p>\r\n        <!-- 点击跳转到描述页面 -->\r\n        <button @click=\"goToDescription\">详情</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'StudyTourRecommendations',\r\n  setup() {\r\n    const recommendations = ref([]); // 存储后端发来的游学推荐信息\r\n    const filterType = ref('all'); // 筛选类型\r\n    const limit = ref('all'); // 展示数量限制\r\n    const sort = ref('default'); // 排序方式\r\n    const searchKeyword = ref(''); // 搜索关键字\r\n    const router = useRouter(); // vue-router\r\n\r\n// 解析后端返回的字符串数据\r\n    const parseRecommendations = (data) => {\r\n      return data.split('\\n').map(line => {\r\n        const parts = line.split(' '); // 根据空格分割每一行\r\n        return {\r\n          id: parseInt(parts[0], 10), // 将ID转换为数字\r\n          name: parts[1], // 类型\r\n          type: parts[2], // 名称\r\n          popularity: parseInt(parts[3], 10), // 热度转换为数字\r\n          rating: parseFloat(parts[4]), // 评分转换为浮点数\r\n        };\r\n      });\r\n    };\r\n\r\n    // 获取游学推荐数据\r\n    const fetchRecommendations = async () => {\r\n      try {\r\n          const bodyData = {\r\n            filterType: filterType.value,\r\n            limit: limit.value,\r\n              sort: sort.value,\r\n            searchKeyword: searchKeyword.value,\r\n          };\r\n\r\n        const response = await axios.post('/api/recommendation', bodyData);\r\n\r\n        if(response.data.success)\r\n          recommendations.value = parseRecommendations(response.data.list);\r\n      } catch (err) {\r\n        console.error('Error fetching recommendations:', err);\r\n        }\r\n    };\r\n\r\n// 新增搜索函数\r\n    const search = () => {\r\n      console.log('搜索关键字:', searchKeyword.value);\r\n      // 可以在这里添加额外的搜索逻辑（如果需要）\r\n      fetchRecommendations(); // 使用当前的筛选条件和搜索关键字获取数据\r\n    };\r\n\r\n    // 跳转到描述页面\r\n    const goToDescription = () => {\r\n      router.push(`/description`);\r\n    };\r\n\r\n    // 初始化获取数据\r\n    fetchRecommendations();\r\n\r\n    return {\r\n      recommendations,\r\n      filterType,\r\n      limit,\r\n      sort,\r\n      searchKeyword,\r\n      goToDescription,\r\n    };\r\n  },\r\n};\r\n</script>"],"mappings":";;EAEOA,KAAK,EAAC;AAA4B;gCACrCC,mBAAA,CAAa,YAAT,MAAI;;EAEHD,KAAK,EAAC;AAAS;gCAEhBC,mBAAA,CAA+B;EAAvBC,KAAK,EAAC;AAAK,GAAC,IAAE;gCACtBD,mBAAA,CAAkC;EAA1BC,KAAK,EAAC;AAAQ,GAAC,IAAE;gCACzBD,mBAAA,CAAkC;EAA1BC,KAAK,EAAC;AAAQ,GAAC,IAAE;oBAFzBC,UAA+B,EAC/BC,UAAkC,EAClCC,UAAkC,C;gCAGlCJ,mBAAA,CAA+B;EAAvBC,KAAK,EAAC;AAAK,GAAC,IAAE;gCACtBD,mBAAA,CAA8B;EAAtBC,KAAK,EAAC;AAAI,GAAC,IAAE;qBADrBI,UAA+B,EAC/BC,UAA8B,C;iCAG9BN,mBAAA,CAAqC;EAA7BC,KAAK,EAAC;AAAS,GAAC,MAAI;iCAC5BD,mBAAA,CAAsC;EAA9BC,KAAK,EAAC;AAAY,GAAC,IAAE;iCAC7BD,mBAAA,CAAkC;EAA1BC,KAAK,EAAC;AAAQ,GAAC,IAAE;qBAFzBM,WAAqC,EACrCC,WAAsC,EACtCC,WAAkC,C;;EAOlCV,KAAK,EAAC;AAAsB;;uBAvBlCW,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,UAAa,EACbC,mBAAA,UAAa,EACbb,mBAAA,CAeM,OAfNc,UAeM,G,gBAdJd,mBAAA,CAIS;IAVf,uBAAAe,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAMuBC,MAAA,CAAAC,UAAU,GAAAF,MAAA;KANjC,IAAAG,UAAA,2B,gBAMuBF,MAAA,CAAAC,UAAU,E,mBAK3BlB,mBAAA,CAGS;IAdf,uBAAAe,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAWuBC,MAAA,CAAAG,KAAK,GAAAJ,MAAA;KAX5B,IAAAK,WAAA,2B,gBAWuBJ,MAAA,CAAAG,KAAK,E,mBAItBpB,mBAAA,CAIS;IAnBf,uBAAAe,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAeuBC,MAAA,CAAAK,IAAI,GAAAN,MAAA;KAf3B,IAAAO,WAAA,2B,gBAeuBN,MAAA,CAAAK,IAAI,E,KAMvBT,mBAAA,SAAY,E,gBACZb,mBAAA,CAAiE;IAA1DwB,IAAI,EAAC,MAAM;IAtBtB,uBAAAT,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAsBgCC,MAAA,CAAAQ,aAAa,GAAAT,MAAA;IAAEU,WAAW,EAAC;iDAA3BT,MAAA,CAAAQ,aAAa,E,GACzCzB,mBAAA,CAAmC;IAA1B2B,OAAK,EAAAZ,MAAA,QAAAA,MAAA,UAAAa,IAAA,KAAEC,IAAA,CAAAC,MAAA,IAAAD,IAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;KAAE,IAAE,GAC1Bf,mBAAA,YAAe,EACfb,mBAAA,CAQK,MARL+B,WAQK,I,kBAPHrB,mBAAA,CAMKsB,SAAA,QAhCXC,WAAA,CA0ByBhB,MAAA,CAAAiB,eAAe,EAAvBC,IAAI;yBAAfzB,mBAAA,CAMK;MANgC0B,GAAG,EAAED,IAAI,CAACE,EAAE;MAAEtC,KAAK,EAAC;QACvDC,mBAAA,CAAyB,WAAtB,KAAG,GAAAsC,gBAAA,CAAGH,IAAI,CAACI,IAAI,kBAClBvC,mBAAA,CAAgC,WAA7B,KAAG,GAAAsC,gBAAA,CAAGH,IAAI,CAACK,UAAU,kBACxBxC,mBAAA,CAA4B,WAAzB,KAAG,GAAAsC,gBAAA,CAAGH,IAAI,CAACM,MAAM,kBACpB5B,mBAAA,eAAkB,EAClBb,mBAAA,CAA4C;MAAnC2B,OAAK,EAAAZ,MAAA,QAAAA,MAAA,UAAAa,IAAA,KAAEX,MAAA,CAAAyB,eAAA,IAAAzB,MAAA,CAAAyB,eAAA,IAAAd,IAAA,CAAe;OAAE,IAAE,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
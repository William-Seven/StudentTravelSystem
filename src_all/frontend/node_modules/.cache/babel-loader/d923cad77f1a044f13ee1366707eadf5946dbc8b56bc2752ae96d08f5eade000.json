{"ast":null,"code":"import { ref } from 'vue';\nimport axios from 'axios';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  name: 'WriteDiary',\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const diary = ref({\n      title: '',\n      author: '',\n      description: '',\n      content: ''\n    }); // 存储日记表单数据 \n\n    const submitDiary = async () => {\n      try {\n        const response = await axios.post('/api/diary-write', diary.value);\n        if (response.data.success) {\n          alert('日记上传成功'); // 告知用户上传成功\n          // 可能还需要在这里做其他事情，比如重定向或清空表单\n        } else {\n          console.error('上传失败:', response.data.message);\n        }\n      } catch (err) {\n        console.error('上传日记时发生错误:', err);\n        alert('上传日记时发生错误，请稍后重试'); // 告知用户错误\n      }\n    };\n\n    // 返回按钮\n    const goBack = () => {\n      router.go(-1); // 返回上一页\n    };\n    return {\n      diary,\n      submitDiary,\n      goBack\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","useRoute","useRouter","name","setup","route","router","diary","title","author","description","content","submitDiary","response","post","value","data","success","alert","console","error","message","err","goBack","go"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\WriteDiary.vue"],"sourcesContent":["<template>\r\n    <div class=\"write-diary\">\r\n        <h1>写日记</h1>\r\n        <button @click=\"goBack\">返回</button>\r\n        <!-- 表单输入 -->\r\n        <form @submit.prevent=\"submitDiary\">\r\n            <div>\r\n                <label for=\"title\">标题:</label>\r\n                <input type=\"text\" id=\"title\" v-model=\"diary.title\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"author\">作者:</label>\r\n                <input type=\"text\" id=\"author\" v-model=\"diary.author\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"description\">描述对象/地点:</label>\r\n                <input type=\"text\" id=\"description\" v-model=\"diary.description\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"content\">日记内容:</label>\r\n                <textarea id=\"content\" v-model=\"diary.content\" required></textarea>\r\n            </div>\r\n            <!-- 提交按钮 -->\r\n            <button type=\"submit\">上传</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n\r\nexport default {\r\n    name: 'WriteDiary',\r\n\r\n    setup() {\r\n        const route = useRoute();\r\n        const router = useRouter();\r\n       const diary = ref({\r\n      title: '',\r\n      author: '',\r\n      description: '',\r\n      content: '',\r\n    }); // 存储日记表单数据 \r\n\r\n        const submitDiary = async () => {\r\n            try {\r\n                const response = await axios.post('/api/diary-write', diary.value);\r\n\r\n                if (response.data.success) {\r\n                    alert('日记上传成功'); // 告知用户上传成功\r\n                    // 可能还需要在这里做其他事情，比如重定向或清空表单\r\n                } else {\r\n                    console.error('上传失败:', response.data.message);\r\n                }\r\n            } catch (err) {\r\n                console.error('上传日记时发生错误:', err);\r\n                alert('上传日记时发生错误，请稍后重试'); // 告知用户错误\r\n            }\r\n        };\r\n\r\n        // 返回按钮\r\n        const goBack = () => {\r\n            router.go(-1); // 返回上一页\r\n        };\r\n\r\n        return {\r\n            diary,\r\n            submitDiary,\r\n            goBack,\r\n        };\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 表单样式 */\r\n.write-diary {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\nform > div {\r\n  margin-bottom: 15px;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n}\r\n\r\ninput[type=\"text\"],\r\ntextarea {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\nbutton {\r\n  padding: 10px 20px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #369f7e;\r\n}\r\n\r\n/* 其他样式 */\r\n</style>"],"mappings":"AA6BA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAY;AAEhD,eAAe;EACXC,IAAI,EAAE,YAAY;EAElBC,KAAKA,CAAA,EAAG;IACJ,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,MAAK,GAAIJ,SAAS,CAAC,CAAC;IAC3B,MAAMK,KAAI,GAAIR,GAAG,CAAC;MACnBS,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE;IACX,CAAC,CAAC,EAAE;;IAEA,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACA,MAAMC,QAAO,GAAI,MAAMb,KAAK,CAACc,IAAI,CAAC,kBAAkB,EAAEP,KAAK,CAACQ,KAAK,CAAC;QAElE,IAAIF,QAAQ,CAACG,IAAI,CAACC,OAAO,EAAE;UACvBC,KAAK,CAAC,QAAQ,CAAC,EAAE;UACjB;QACJ,OAAO;UACHC,OAAO,CAACC,KAAK,CAAC,OAAO,EAAEP,QAAQ,CAACG,IAAI,CAACK,OAAO,CAAC;QACjD;MACJ,EAAE,OAAOC,GAAG,EAAE;QACVH,OAAO,CAACC,KAAK,CAAC,YAAY,EAAEE,GAAG,CAAC;QAChCJ,KAAK,CAAC,iBAAiB,CAAC,EAAE;MAC9B;IACJ,CAAC;;IAED;IACA,MAAMK,MAAK,GAAIA,CAAA,KAAM;MACjBjB,MAAM,CAACkB,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;IACnB,CAAC;IAED,OAAO;MACHjB,KAAK;MACLK,WAAW;MACXW;IACJ,CAAC;EACL;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
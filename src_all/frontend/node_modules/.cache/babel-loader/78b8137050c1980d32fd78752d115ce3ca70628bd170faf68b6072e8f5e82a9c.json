{"ast":null,"code":"import { ref } from 'vue';\nimport axios from 'axios';\nexport default {\n  name: 'WriteDiary',\n  setup() {\n    const diary = ref({\n      title: '',\n      author: '',\n      description: '',\n      content: ''\n    }); // 存储日记表单数据\n\n    const {\n      title,\n      author,\n      description,\n      content\n    } = diary.value;\n    const submitDiary = async () => {\n      try {\n        const response = await axios.post('/api/diary-write', {\n          title: title,\n          author: author,\n          description: description,\n          content: content\n        });\n        if (response.data.success) {\n          alert('日记上传成功'); // 告知用户上传成功\n          // 可能还需要在这里做其他事情，比如重定向或清空表单\n        } else {\n          console.error('上传失败:', response.data.message);\n        }\n      } catch (err) {\n        console.error('上传日记时发生错误:', err);\n        alert('上传日记时发生错误，请稍后重试'); // 告知用户错误\n      }\n    };\n    return {\n      diary,\n      submitDiary\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","name","setup","diary","title","author","description","content","value","submitDiary","response","post","data","success","alert","console","error","message","err"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\WriteDiary.vue"],"sourcesContent":["<template>\r\n    <div class=\"write-diary\">\r\n        <h1>写日记</h1>\r\n        <!-- 表单输入 -->\r\n        <form @submit.prevent=\"submitDiary\">\r\n            <div>\r\n                <label for=\"title\">标题:</label>\r\n                <input type=\"text\" id=\"title\" v-model=\"diary.title\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"author\">作者:</label>\r\n                <input type=\"text\" id=\"author\" v-model=\"diary.author\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"description\">描述对象/地点:</label>\r\n                <input type=\"text\" id=\"description\" v-model=\"diary.description\" required>\r\n            </div>\r\n            <div>\r\n                <label for=\"content\">日记内容:</label>\r\n                <textarea id=\"content\" v-model=\"diary.content\" required></textarea>\r\n            </div>\r\n            <!-- 提交按钮 -->\r\n            <button type=\"submit\">上传</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: 'WriteDiary',\r\n    setup() {\r\n        const diary = ref({ title: '', author: '', description: '', content: '' }); // 存储日记表单数据\r\n\r\n        const { title, author, description, content } = diary.value;\r\n\r\n        const submitDiary = async () => {\r\n            try {\r\n                const response = await axios.post('/api/diary-write', {\r\n                    title: title,\r\n                    author: author,\r\n                    description: description,\r\n                    content: content\r\n                });\r\n\r\n                if (response.data.success) {\r\n                    alert('日记上传成功'); // 告知用户上传成功\r\n                    // 可能还需要在这里做其他事情，比如重定向或清空表单\r\n                } else {\r\n                    console.error('上传失败:', response.data.message);\r\n                }\r\n            } catch (err) {\r\n                console.error('上传日记时发生错误:', err);\r\n                alert('上传日记时发生错误，请稍后重试'); // 告知用户错误\r\n            }\r\n        };\r\n\r\n        return {\r\n            diary,\r\n            submitDiary\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 表单样式 */\r\nform > div {\r\n    margin-bottom: 15px;\r\n}\r\n\r\n/* 其他样式 */\r\n</style>"],"mappings":"AA4BA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,KAAKA,CAAA,EAAG;IACJ,MAAMC,KAAI,GAAIJ,GAAG,CAAC;MAAEK,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE;MAAEC,OAAO,EAAE;IAAG,CAAC,CAAC,EAAE;;IAE5E,MAAM;MAAEH,KAAK;MAAEC,MAAM;MAAEC,WAAW;MAAEC;IAAQ,IAAIJ,KAAK,CAACK,KAAK;IAE3D,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACA,MAAMC,QAAO,GAAI,MAAMV,KAAK,CAACW,IAAI,CAAC,kBAAkB,EAAE;UAClDP,KAAK,EAAEA,KAAK;UACZC,MAAM,EAAEA,MAAM;UACdC,WAAW,EAAEA,WAAW;UACxBC,OAAO,EAAEA;QACb,CAAC,CAAC;QAEF,IAAIG,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;UACvBC,KAAK,CAAC,QAAQ,CAAC,EAAE;UACjB;QACJ,OAAO;UACHC,OAAO,CAACC,KAAK,CAAC,OAAO,EAAEN,QAAQ,CAACE,IAAI,CAACK,OAAO,CAAC;QACjD;MACJ,EAAE,OAAOC,GAAG,EAAE;QACVH,OAAO,CAACC,KAAK,CAAC,YAAY,EAAEE,GAAG,CAAC;QAChCJ,KAAK,CAAC,iBAAiB,CAAC,EAAE;MAC9B;IACJ,CAAC;IAED,OAAO;MACHX,KAAK;MACLM;IACJ,CAAC;EACL;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
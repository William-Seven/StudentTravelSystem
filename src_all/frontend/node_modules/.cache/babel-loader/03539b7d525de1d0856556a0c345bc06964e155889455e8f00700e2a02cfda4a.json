{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'RoutePlanner',\n  setup() {\n    const currentArea = ref(null);\n    const routeType = ref('pointToPoint'); // 默认为点对点路线规划\n    const startPoint = ref('');\n    const endPoint = ref('');\n    const currentLocation = ref('');\n    const viaPoints = ref(['']);\n    const transport = ref('walk');\n    const error = ref('');\n    const routeInfo = ref('');\n    const router = useRouter();\n\n    // 新增重置字段的函数\n    const resetFields = () => {\n      startPoint.value = '';\n      endPoint.value = '';\n      currentLocation.value = '';\n      viaPoints.value = ['']; // 重置途径点列表\n      transport.value = 'walk'; // 重置交通工具\n      error.value = ''; // 清除错误信息\n      routeInfo.value = ''; // 清除路线信息\n    };\n    onMounted(resetFields); // 组件挂载时重置字段\n\n    const toggleRouteType = () => {\n      resetFields(); // 添加重置字段操作\n      routeType.value = routeType.value === 'pointToPoint' ? 'multipleWaypoints' : 'pointToPoint';\n    };\n    const selectArea = area => {\n      resetFields(); // 添加重置字段操作\n      currentArea.value = area;\n      //routeType.value = 'pointToPoint'; // 默认选择点对点路线规划\n    };\n    const addViaPoint = () => {\n      viaPoints.value.push('');\n    };\n    const searchRoute = async () => {\n      try {\n        const response = await axios.post('/api/route-plan', {\n          area: currentArea.value,\n          type: routeType.value,\n          startPoint: startPoint.value,\n          endPoint: endPoint.value,\n          currentLocation: currentLocation.value,\n          viaPoints: viaPoints.value,\n          transport: transport.value\n        });\n        if (response.data.success) {\n          routeInfo.value = response.data.info;\n        } else {\n          error.value = response.data.error;\n        }\n      } catch (err) {\n        error.value = '搜索路线时发生错误。';\n      }\n    };\n\n    // 定义跳转到首页的函数\n    const goToDashboard = () => {\n      router.push('/dashboard');\n    };\n    return {\n      currentArea,\n      routeType,\n      startPoint,\n      endPoint,\n      currentLocation,\n      viaPoints,\n      transport,\n      error,\n      routeInfo,\n      selectArea,\n      addViaPoint,\n      searchRoute,\n      toggleRouteType,\n      resetFields,\n      goToDashboard\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","useRouter","name","setup","currentArea","routeType","startPoint","endPoint","currentLocation","viaPoints","transport","error","routeInfo","router","resetFields","value","toggleRouteType","selectArea","area","addViaPoint","push","searchRoute","response","post","type","data","success","info","err","goToDashboard"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\RoutePlanner.vue"],"sourcesContent":["<!-- RoutePlanner.vue -->\r\n<template>\r\n  <div class=\"route-planner\">\r\n    <h1>路线规划</h1>\r\n<button @click=\"goToDashboard\">返回首页</button>\r\n    <!-- 选择景区或校园 -->\r\n    <div>\r\n      <button @click=\"selectArea('scenic')\">景区</button>\r\n      <button @click=\"selectArea('campus')\">校园</button>\r\n    </div>\r\n    <!-- 根据选择显示不同的输入框 -->\r\n    <!-- 切换点对点和多途径点 -->\r\n    <div v-if=\"currentArea\">\r\n      <h2>{{ currentArea === 'scenic' ? '景区路线规划' : '校园路线规划' }}</h2>\r\n      <button @click=\"toggleRouteType\">切换到{{ routeType === 'pointToPoint' ? '多途径点' : '点对点' }}</button>\r\n      <!-- 点对点路线规划 -->\r\n      <div v-if=\"routeType === 'pointToPoint'\">\r\n        <input v-model=\"startPoint\" placeholder=\"起点\">\r\n        <input v-model=\"endPoint\" placeholder=\"终点\">\r\n        <select v-model=\"transport\">\r\n          <option value=\"walk\">步行</option>\r\n          <!--景区特有的电动车-->\r\n          <option v-if=\"currentArea === 'scenic'\" value=\"ebike\">电动车</option>\r\n          <!-- 校园的交通工具选项 -->\r\n          <option v-if=\"currentArea === 'campus'\" value=\"bike\">自行车</option>\r\n        </select>\r\n        <button @click=\"searchRoute\">搜索</button>\r\n      </div>\r\n      <!-- 多途径点路线规划 -->\r\n      <div v-else>\r\n        <input v-model=\"currentLocation\" placeholder=\"当前位置\">\r\n        <div v-for=\"(point, index) in viaPoints\" :key=\"index\">\r\n          <input v-model=\"viaPoints[index]\" placeholder=\"途径点\">\r\n        </div>\r\n        <button @click=\"addViaPoint\">添加途径点</button>\r\n        <button @click=\"searchRoute\">搜索</button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n    <div v-if=\"routeInfo\" class=\"route-info\">\r\n      <h3>路线信息:</h3>\r\n      <!-- 使用 v-html 来渲染HTML实体 -->\r\n      <div v-html=\"routeInfo\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'RoutePlanner',\r\n  setup() {\r\n    const currentArea = ref(null);\r\n    const routeType = ref('pointToPoint'); // 默认为点对点路线规划\r\n    const startPoint = ref('');\r\n    const endPoint = ref('');\r\n    const currentLocation = ref('');\r\n    const viaPoints = ref(['']);\r\n    const transport = ref('walk');\r\n    const error = ref('');\r\n    const routeInfo = ref('');\r\nconst router = useRouter();\r\n\r\n// 新增重置字段的函数\r\n    const resetFields = () => {\r\n      startPoint.value = '';\r\n      endPoint.value = '';\r\n      currentLocation.value = '';\r\n      viaPoints.value = ['']; // 重置途径点列表\r\n      transport.value = 'walk'; // 重置交通工具\r\n      error.value = ''; // 清除错误信息\r\n      routeInfo.value = ''; // 清除路线信息\r\n    };\r\n\r\n    onMounted(resetFields); // 组件挂载时重置字段\r\n\r\n    const toggleRouteType = () => {\r\n  resetFields(); // 添加重置字段操作\r\n      routeType.value = routeType.value === 'pointToPoint' ? 'multipleWaypoints' : 'pointToPoint';\r\n    };\r\n\r\n    const selectArea = (area) => {\r\n      resetFields(); // 添加重置字段操作\r\n      currentArea.value = area;\r\n      //routeType.value = 'pointToPoint'; // 默认选择点对点路线规划\r\n    };\r\n\r\n    const addViaPoint = () => {\r\n      viaPoints.value.push('');\r\n    };\r\n\r\n    const searchRoute = async () => {\r\n      try {\r\n        const response = await axios.post('/api/route-plan', {\r\n          area: currentArea.value,\r\n          type: routeType.value,\r\n          startPoint: startPoint.value,\r\n          endPoint: endPoint.value,\r\n          currentLocation: currentLocation.value,\r\n          viaPoints: viaPoints.value,\r\n          transport: transport.value,\r\n        });\r\n        \r\n        if (response.data.success) {\r\n          routeInfo.value = response.data.info;\r\n        } else {\r\n          error.value = response.data.error;\r\n        }\r\n      } catch (err) {\r\n        error.value = '搜索路线时发生错误。';\r\n      }\r\n    };\r\n\r\n// 定义跳转到首页的函数\r\n      const goToDashboard = () => {\r\n        router.push('/dashboard');\r\n      };\r\n\r\n    return {\r\n      currentArea,\r\n      routeType,\r\n      startPoint,\r\n      endPoint,\r\n      currentLocation,\r\n      viaPoints,\r\n      transport,\r\n      error,\r\n      routeInfo,\r\n      selectArea,\r\n      addViaPoint,\r\n        searchRoute,\r\n      toggleRouteType,\r\n      resetFields,\r\n      goToDashboard,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 你的 CSS 样式 */\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
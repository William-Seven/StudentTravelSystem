{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'StudyTourRecommendations',\n  setup() {\n    const recommendations = ref([]); // 存储后端发来的游学推荐信息\n    const filterType = ref('all'); // 筛选类型\n    const limit = ref('all'); // 展示数量限制\n    const sort = ref('default'); // 排序方式\n    const searchKeyword = ref(''); // 搜索关键字\n    const router = useRouter(); // vue-router\n\n    // 解析后端返回的字符串数据\n    const parseRecommendations = data => {\n      return data.split('\\n').map(line => {\n        const parts = line.split(',');\n        const name = parts[0].trim();\n        const popularity = parseInt(parts[1].match(/\\d+/)[0], 10);\n        const rating = parseFloat(parts[2].match(/\\d+\\.\\d+/)[0]);\n        return {\n          id: recommendations.value.length + 1,\n          name,\n          popularity,\n          rating\n        };\n      });\n    };\n\n    // 获取游学推荐数据\n    const fetchRecommendations = async () => {\n      try {\n        const bodyData = {\n          filterType: filterType.value,\n          limit: limit.value,\n          sort: sort.value,\n          searchKeyword: searchKeyword.value\n        };\n        const response = await axios.post('/api/recommendation', bodyData);\n        recommendations.value = response.data;\n      } catch (err) {\n        console.error('Error fetching recommendations:', err);\n      }\n      ;\n    };\n\n    // 跳转到描述页面\n    const goToDescription = () => {\n      router.push(`/description`);\n    };\n\n    // 初始化获取数据\n    fetchRecommendations();\n    return {\n      recommendations,\n      filterType,\n      limit,\n      sort,\n      searchKeyword,\n      goToDescription\n    };\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","name","setup","recommendations","filterType","limit","sort","searchKeyword","router","parseRecommendations","data","split","map","line","parts","trim","popularity","parseInt","match","rating","parseFloat","id","value","length","fetchRecommendations","bodyData","response","post","err","console","error","goToDescription","push"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\StudyTourRecommendations.vue"],"sourcesContent":["<!-- StudyTourRecommendations.vue -->\r\n<template>\r\n  <div class=\"study-tour-recommendations\">\r\n    <h1>游学推荐</h1>\r\n    <!-- 筛选选项 -->\r\n    <div class=\"filters\">\r\n      <select v-model=\"filterType\">\r\n        <option value=\"all\">全部</option>\r\n        <option value=\"scenic\">景区</option>\r\n        <option value=\"campus\">学校</option>\r\n      </select>\r\n      <select v-model=\"limit\">\r\n        <option value=\"all\">全部</option>\r\n        <option value=\"10\">前十</option>\r\n      </select>\r\n      <select v-model=\"sort\">\r\n        <option value=\"default\">默认排序</option>\r\n        <option value=\"popularity\">热度</option>\r\n        <option value=\"rating\">评分</option>\r\n      </select>\r\n    </div>\r\n    <!-- 搜索框 -->\r\n    <input type=\"text\" v-model=\"searchKeyword\" placeholder=\"搜索景区或学校\">\r\n    <button @click=\"search\">搜索</button>\r\n    <!-- 游学推荐列表 -->\r\n    <ul class=\"recommendations-list\">\r\n      <li v-for=\"item in filteredRecommendations\" :key=\"item.id\" class=\"recommendation-item\">\r\n        {{ item.name }}\r\n        <!-- 点击跳转到描述页面 -->\r\n        <button @click=\"goToDescription\">详情</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'StudyTourRecommendations',\r\n  setup() {\r\n    const recommendations = ref([]); // 存储后端发来的游学推荐信息\r\n    const filterType = ref('all'); // 筛选类型\r\n    const limit = ref('all'); // 展示数量限制\r\n    const sort = ref('default'); // 排序方式\r\n    const searchKeyword = ref(''); // 搜索关键字\r\n    const router = useRouter(); // vue-router\r\n\r\n// 解析后端返回的字符串数据\r\n    const parseRecommendations = (data) => {\r\n      return data.split('\\n').map(line => {\r\n        const parts = line.split(',');\r\n        const name = parts[0].trim();\r\n        const popularity = parseInt(parts[1].match(/\\d+/)[0], 10);\r\n        const rating = parseFloat(parts[2].match(/\\d+\\.\\d+/)[0]);\r\n        return { id: recommendations.value.length + 1, name, popularity, rating };\r\n      });\r\n    };\r\n\r\n    // 获取游学推荐数据\r\n    const fetchRecommendations = async () => {\r\n      try {\r\n          const bodyData = {\r\n            filterType: filterType.value,\r\n            limit: limit.value,\r\n              sort: sort.value,\r\n            searchKeyword: searchKeyword.value,\r\n          };\r\n\r\n        const response = await axios.post('/api/recommendation', bodyData);\r\n        recommendations.value = response.data;\r\n      } catch (err) {\r\n        console.error('Error fetching recommendations:', err);\r\n        };\r\n    };\r\n\r\n    // 跳转到描述页面\r\n    const goToDescription = () => {\r\n      router.push(`/description`);\r\n    };\r\n\r\n    // 初始化获取数据\r\n    fetchRecommendations();\r\n\r\n    return {\r\n      recommendations,\r\n      filterType,\r\n      limit,\r\n      sort,\r\n      searchKeyword,\r\n      goToDescription,\r\n    };\r\n  },\r\n};\r\n</script>"],"mappings":";AAoCA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,0BAA0B;EAChCC,KAAKA,CAAA,EAAG;IACN,MAAMC,eAAc,GAAIL,GAAG,CAAC,EAAE,CAAC,EAAE;IACjC,MAAMM,UAAS,GAAIN,GAAG,CAAC,KAAK,CAAC,EAAE;IAC/B,MAAMO,KAAI,GAAIP,GAAG,CAAC,KAAK,CAAC,EAAE;IAC1B,MAAMQ,IAAG,GAAIR,GAAG,CAAC,SAAS,CAAC,EAAE;IAC7B,MAAMS,aAAY,GAAIT,GAAG,CAAC,EAAE,CAAC,EAAE;IAC/B,MAAMU,MAAK,GAAIR,SAAS,CAAC,CAAC,EAAE;;IAEhC;IACI,MAAMS,oBAAmB,GAAKC,IAAI,IAAK;MACrC,OAAOA,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,GAAG,CAACC,IAAG,IAAK;QAClC,MAAMC,KAAI,GAAID,IAAI,CAACF,KAAK,CAAC,GAAG,CAAC;QAC7B,MAAMV,IAAG,GAAIa,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;QAC5B,MAAMC,UAAS,GAAIC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;QACzD,MAAMC,MAAK,GAAIC,UAAU,CAACN,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACxD,OAAO;UAAEG,EAAE,EAAElB,eAAe,CAACmB,KAAK,CAACC,MAAK,GAAI,CAAC;UAAEtB,IAAI;UAAEe,UAAU;UAAEG;QAAO,CAAC;MAC3E,CAAC,CAAC;IACJ,CAAC;;IAED;IACA,MAAMK,oBAAmB,GAAI,MAAAA,CAAA,KAAY;MACvC,IAAI;QACA,MAAMC,QAAO,GAAI;UACfrB,UAAU,EAAEA,UAAU,CAACkB,KAAK;UAC5BjB,KAAK,EAAEA,KAAK,CAACiB,KAAK;UAChBhB,IAAI,EAAEA,IAAI,CAACgB,KAAK;UAClBf,aAAa,EAAEA,aAAa,CAACe;QAC/B,CAAC;QAEH,MAAMI,QAAO,GAAI,MAAM3B,KAAK,CAAC4B,IAAI,CAAC,qBAAqB,EAAEF,QAAQ,CAAC;QAClEtB,eAAe,CAACmB,KAAI,GAAII,QAAQ,CAAChB,IAAI;MACvC,EAAE,OAAOkB,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEF,GAAG,CAAC;MACrD;MAAC;IACL,CAAC;;IAED;IACA,MAAMG,eAAc,GAAIA,CAAA,KAAM;MAC5BvB,MAAM,CAACwB,IAAI,CAAE,cAAa,CAAC;IAC7B,CAAC;;IAED;IACAR,oBAAoB,CAAC,CAAC;IAEtB,OAAO;MACLrB,eAAe;MACfC,UAAU;MACVC,KAAK;MACLC,IAAI;MACJC,aAAa;MACbwB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
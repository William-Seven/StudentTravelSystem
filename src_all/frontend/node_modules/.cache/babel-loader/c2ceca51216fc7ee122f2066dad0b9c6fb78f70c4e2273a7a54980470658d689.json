{"ast":null,"code":"import { createElementVNode as _createElementVNode, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a7d5189\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"background\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"form\"\n};\nconst _hoisted_3 = {\n  class: \"study-tour-recommendations\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"title\"\n}, \"游学推荐\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"search\"\n};\nconst _hoisted_6 = {\n  class: \"filters\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"all\"\n}, \"全部\", -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"scenic\"\n}, \"景区\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"campus\"\n}, \"学校\", -1 /* HOISTED */));\nconst _hoisted_10 = [_hoisted_7, _hoisted_8, _hoisted_9];\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"all\"\n}, \"全部\", -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"10\"\n}, \"前十\", -1 /* HOISTED */));\nconst _hoisted_13 = [_hoisted_11, _hoisted_12];\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"default\"\n}, \"默认排序\", -1 /* HOISTED */));\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"popularity\"\n}, \"热度\", -1 /* HOISTED */));\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"rating\"\n}, \"评分\", -1 /* HOISTED */));\nconst _hoisted_17 = [_hoisted_14, _hoisted_15, _hoisted_16];\nconst _hoisted_18 = {\n  class: \"recommendations-list\"\n};\nconst _hoisted_19 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"form\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"button\", {\n    class: \"return_button\",\n    onClick: _cache[0] || (_cache[0] = _withModifiers((...args) => $setup.goToDashboard && $setup.goToDashboard(...args), [\"prevent\"]))\n  }, \"返回首页\"), _createCommentVNode(\" 筛选选项 \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.filterType = $event)\n  }, [..._hoisted_10], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.filterType]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.limit = $event)\n  }, [..._hoisted_13], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.limit]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.sort = $event)\n  }, [..._hoisted_17], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.sort]])]), _createCommentVNode(\" 搜索框 \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.searchKeyword = $event),\n    placeholder: \"搜索景区或学校\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchKeyword]]), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = _withModifiers((...args) => $setup.search && $setup.search(...args), [\"prevent\"]))\n  }, \"搜索\")]), _createCommentVNode(\" 游学推荐列表 \"), _createElementVNode(\"ul\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recommendations, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id,\n      class: \"recommendation-item\"\n    }, [_createElementVNode(\"p\", null, \"名称：\" + _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"热度：\" + _toDisplayString(item.popularity), 1 /* TEXT */), _createElementVNode(\"p\", null, \"评分：\" + _toDisplayString(item.rating), 1 /* TEXT */), _createCommentVNode(\" 点击跳转到描述页面 \"), _createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $setup.goToDescription(item), [\"prevent\"])\n    }, \"详情\", 8 /* PROPS */, _hoisted_19)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","value","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","_withModifiers","args","$setup","goToDashboard","_createCommentVNode","_hoisted_5","_hoisted_6","$event","filterType","_hoisted_10","limit","_hoisted_13","sort","_hoisted_17","type","searchKeyword","placeholder","search","_hoisted_18","_renderList","recommendations","item","key","id","_toDisplayString","name","popularity","rating","goToDescription","_hoisted_19"],"sources":["D:\\Users\\SevenGrass\\Documents\\WILLIAMZHANG\\DataStrucCourseDes\\MyGithub\\src_all\\frontend\\src\\components\\StudyTourRecommendations.vue"],"sourcesContent":["<!-- StudyTourRecommendations.vue -->\r\n<template>\r\n  <div class=\"background\"></div>\r\n  <form class=\"form\">\r\n    <div class=\"study-tour-recommendations\">\r\n      <h1 class=\"title\">游学推荐</h1>\r\n      <button class=\"return_button\" @click.prevent=\"goToDashboard\">返回首页</button>\r\n      <!-- 筛选选项 -->\r\n      <div class=\"search\">\r\n        <div class=\"filters\">\r\n          <select v-model=\"filterType\">\r\n            <option value=\"all\">全部</option>\r\n            <option value=\"scenic\">景区</option>\r\n            <option value=\"campus\">学校</option>\r\n          </select>\r\n          <select v-model=\"limit\">\r\n            <option value=\"all\">全部</option>\r\n            <option value=\"10\">前十</option>\r\n          </select>\r\n          <select v-model=\"sort\">\r\n            <option value=\"default\">默认排序</option>\r\n            <option value=\"popularity\">热度</option>\r\n            <option value=\"rating\">评分</option>\r\n          </select>\r\n        </div>\r\n        <!-- 搜索框 -->\r\n        <input type=\"text\" v-model=\"searchKeyword\" placeholder=\"搜索景区或学校\">\r\n        <button @click.prevent=\"search\">搜索</button>\r\n      </div>\r\n      <!-- 游学推荐列表 -->\r\n      <ul class=\"recommendations-list\">\r\n        <li v-for=\"item in recommendations\" :key=\"item.id\" class=\"recommendation-item\">\r\n          <p>名称：{{ item.name }}</p>\r\n          <p>热度：{{ item.popularity }} </p>\r\n          <p>评分：{{ item.rating }} </p>\r\n          <!-- 点击跳转到描述页面 -->\r\n          <button @click.prevent=\"goToDescription(item)\">详情</button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'StudyTourRecommendations',\r\n  setup() {\r\n    const recommendations = ref([]); // 存储后端发来的游学推荐信息\r\n    const filterType = ref('all'); // 筛选类型\r\n    const limit = ref('all'); // 展示数量限制\r\n    const sort = ref('default'); // 排序方式\r\n    const searchKeyword = ref(''); // 搜索关键字\r\n    const router = useRouter(); // vue-router\r\n\r\n    // 解析后端返回的字符串数据\r\n    const parseRecommendations = (data) => {\r\n      return data.split('\\n').filter(line => line.trim() !== '').map(line => {\r\n        const parts = line.split(' '); // 根据空格分割每一行\r\n        return {\r\n          id: parseInt(parts[0], 10), // 将ID转换为数字\r\n          name: parts[1], // 类型\r\n          type: parts[2], // 名称\r\n          popularity: parseInt(parts[3], 10), // 热度转换为数字\r\n          rating: parseFloat(parts[4]), // 评分转换为浮点数\r\n        };\r\n      });\r\n    };\r\n\r\n    // 获取游学推荐数据\r\n    const fetchRecommendations = async () => {\r\n      try {\r\n        const bodyData = {\r\n          filterType: filterType.value,\r\n          limit: limit.value,\r\n          sort: sort.value,\r\n          searchKeyword: searchKeyword.value,\r\n        };\r\n\r\n        const response = await axios.post('/api/recommendation', bodyData);\r\n\r\n        if (response.data.success)\r\n          recommendations.value = parseRecommendations(response.data.list);\r\n      } catch (err) {\r\n        console.error('Error fetching recommendations:', err);\r\n      }\r\n    };\r\n\r\n    // 新增搜索函数\r\n    const search = () => {\r\n      console.log('搜索关键字:', searchKeyword.value);\r\n      // 可以在这里添加额外的搜索逻辑（如果需要）\r\n      fetchRecommendations(); // 使用当前的筛选条件和搜索关键字获取数据\r\n    };\r\n\r\n    // 跳转到描述页面\r\n    const goToDescription = (item) => {\r\n      // 根据item.type的值来决定跳转的路由\r\n      const path = (item.type === 'attraction') ? '/description' : '/descriptionsc';\r\n      router.push(path);\r\n      //router.push(`/description`);\r\n    };\r\n\r\n    // 定义跳转到首页的函数\r\n    const goToDashboard = () => {\r\n      router.push('/dashboard');\r\n    };\r\n\r\n    // 初始化获取数据\r\n    fetchRecommendations();\r\n\r\n    return {\r\n      recommendations,\r\n      filterType,\r\n      limit,\r\n      sort,\r\n      searchKeyword,\r\n      search,\r\n      goToDescription,\r\n      goToDashboard,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.background {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  background-attachment: fixed;\r\n  overflow: hidden;\r\n  background-image: url('~@/assets/img/recommendback.jpg');\r\n  background-size: cover;\r\n}\r\n\r\n.background::before {\r\n  content: \"\";\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url('~@/assets/img/recommendback.jpg');\r\n  background-size: cover;\r\n  background-attachment: fixed;\r\n  z-index: -1;\r\n  /* 确保背景层在内容层之下 */\r\n}\r\n\r\n.form {\r\n  position: absolute;\r\n  transform: translate(-50%, 0%);\r\n  padding: 2%;\r\n  top: 5%;\r\n  left: 50%;\r\n  width: 45%;\r\n  min-height: 500px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 20px;\r\n  /* 设置圆角为20像素 */\r\n  /* 其他样式，例如边框、阴影等 */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  /* 添加轻微的阴影效果 */\r\n}\r\n\r\n.title {\r\n  color: #fefefe;\r\n  font-size: 4em;\r\n  /* 设置字号大小 */\r\n  margin: 0%;\r\n  font-family: 'STKaiti', 'KaiTi', sans-serif;\r\n  /* 优先使用华文楷体，如果不可用则使用无衬线字体 */\r\n  max-width: 80%;\r\n  margin-top: 0vh;\r\n  text-align: center;\r\n  margin-left: auto;\r\n  /* 左外边距自动 */\r\n  margin-right: auto;\r\n  /* 右外边距自动 */\r\n  margin-bottom: 0em;\r\n}\r\n\r\nbutton {\r\n  justify-content: space-between;\r\n  margin: auto;\r\n  font-size: 1em;\r\n  border: 1px solid #000;\r\n  /* 边框样式，可以根据需要调整 */\r\n  cursor: pointer;\r\n  /* 鼠标悬停时显示指针手势 */\r\n  border-radius: 8px;\r\n  /* 添加圆角 */\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #56cfcf;\r\n}\r\n\r\n.return_button {\r\n  transform: translate(-50%, -50%);\r\n  position: absolute;\r\n  top: 2em;\r\n  left: 10%;\r\n}\r\n\r\n.search {\r\n  text-align: center;\r\n  margin-left: auto;\r\n  /* 左外边距自动 */\r\n  margin-right: auto;\r\n  /* 右外边距自动 */\r\n}\r\n\r\n.recommendation-item {\r\n  color: #fefefe;\r\n  margin-bottom: 3em;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}